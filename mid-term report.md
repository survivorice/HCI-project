# 语音自主定位方法——中期报告
----
组长：张啸 516030910467   
组员：王力帆 516030910438    汤志彪 516030910435


## 应用背景
   
  定位是智能交互系统中非常重要的技术环节。传统的定位技术基本都是通过各种传感（红外、蓝牙、视觉、超声波等）技术对目标对象进行跟踪定位。
近年来出现了利用SLAM等技术进行对象自主定位的方法。在SLAM理论中，第一个问题称为定位 (Localization)，第二个称为建图 (Mapping)，第三个则是随后的路径规划。然而利用SLAM进行定位时构建场景时耗时较长，且需要比较多的资源。

## 主要目标

  本项目希望通过用语音识别交互的方式进行对象的粗定位，缩小SLAM搜索空间提高精确定位效率。本质上的初衷是为了对SLAM技术的第一步定位进行优化。


## HCI用户分析

### 用户需求
   - 反应速度快
      * 用户输入语音后能快速的做出响应，返回可能的结果或目标
   - 返回的结果识别度高。
      * 即返回时的字体大小要合适，同时语义要让用户能够理解。
   - 语音识别更加灵活
      * 可识别的语音要尽可能的贴合实际，而不是需要用户硬性的按照固定的格式才可识别。
        即尽量减少用户得不到结果或者得到错误结果的可能。
   - 定位尽可能精准
      * 基本要求，定位准确
   - 界面简单，易于学习使用
      * 操作方便简单容易上手，贴合大众人群实际， 能在群众中推广
   

## 设计方案
![流程图](https://github.com/survivorice/HCI-project/blob/master/The%20flow%20chart.png)

    1.打开应用后系统现根据GPS初定位；
    2.用户输入语音，应用进行识别，返回识别出的字符串
    3.应用分析音频，提取其中的关键字
    4. a）若提取出关键字，用户将关键字与系统库进行比对
       b）若提取不出关键字，返回第2步
    5. a）比对结果为多个结果，应用返回可能的结果供用户选择
       b）对比结果只有一个，直接输出结果，跳到第7步
       c）对比结果为无，返回第2步
    6. 用户返回结果，比对库后返回结果
    7. 对目标区域高亮显示，反馈给用户

## 创新点
        
1. 组合Unity 3D与讯飞语音识别功能，在语音分析模块可以尝试利用算法提高分析效率和准确度，提高用户体验质量

2. 利用楼栋不同楼层有相同的建筑结构的特点，实现应用的可拓展性。当地图更新时可以拓展定位。


## 技术方案与测试

### 语音识别

在Unity 3D中使用讯飞语音进行对于音频识别，现已测试讯飞语音的识别准确度，发现同一句话在语速、语调或口语不同的情况下可能返回不同的结果，需要研究算法提高识别准确度。

### 语音分析
   
对语音识别返回的字符串进行分析，提取keyword。对比预设的keyword。如何提取keyword、如何设计keyword贴合日常语句以及如何使keyword有较好的覆盖率是现阶段的难点。

### 移动端开发

利用Unity C# 自制TCP协议，在手机端和电脑端实现通讯。如何将pc端的应用移植到移动端app和如何实现移动端与pc端通讯是我们需要了解的。现已对利用Unity在安卓平台上的开发做出了尝试，并成功生成了apk包在移动端进行安装，功能均正常。

## 已完成工作内容
   ### 语音识别功能
      通过讯飞官网下载SDK，同时添加语音听写AI能力（添加新服务）。
      在Eclipse中导入项目并进行相关配置工作。
      在unity中导入上述目标并且编写Xunfei Manager脚本。
      已在安卓环境下有初步的GUI界面，可以用于测试。
      
   ### 语音识别测试
       测试用例：
         1.我在3308      正确
         2.我在3308里面  正确
         3.我在3308外面  正确
         4.我在3308东面  正确
         5.我在3308旁边的走廊上 正确
         6.我在3201      正确
         7.我在楼梯口     正确
         8.我在走廊       正确
         9.我在2楼        正确
         10.我在软件学院2楼 正确
         11.我在软件学院3308 正确
         12.我在软件学院三楼走廊 正确
         13.我在二楼走廊东边   正确
         14.我在软件学院走廊西边 正确
         15.我前面是楼梯    正确
         16.我在2208     语速过快导致识别出208
         17. 我在软院3208   正确
         18. 我在学院三楼    正确
         19. 我旁边是走廊    正确
         20. 我旁边是3208    正确
       总结：
      1. 对于"我在3308"这种带有数字的输入能做到正确识别。
      2. 对于"我在3308里面"中的"里面""外面""旁边""前面"等方位词能够正确识别。
      3. 对于"楼梯口""走廊"等特殊地点能够正确识别。
      4. 有时候语速过快可能导致识别偏差。
      5. 阿拉伯数字和汉字之间需要考虑。
      6. 对于近义词要进行处理。
      之后通过对测试用例的分析进行关键词的识别提取分析。
      
     
   ### 模型导入与处理
       导入模型为软件学院大楼的模型。
       处理模型决定使用Highlighting System 。
       主要是通过：1.在摄像机上添加Highlighing Renderer组件，
                  2.给要高亮显示的物体，添加Highlighter组件。
       效果图：
       ![高亮效果图](https://github.com/survivorice/HCI-project/picture/highlighting.png)
 
 ## 未完成工作内容
   1. 关键词的提取与分析
   2. 给与用户的反馈
   3. GUI的美化以及更加符合HCI思想
## 参考
- 讯飞SDK，[xunfei](https://www.xfyun.cn/)
- 讯飞与Unity结合，[xunfei&unity](https://blog.csdn.net/qq_15267341/article/details/52074225?tdsourcetag=s_pctim_aiomsg)
- Unity TCP实现，[TCP&Unity](https://blog.csdn.net/qq992817263/article/details/50164931/)

## 项目工作计划与分工

### 项目分工
     



